//JQuery del plugin

! function ($) {
    $.fn.snazzyMenu = function (options, breakpoint) {
        const nav = $(this),
            settings = $.extend({
                theme: "dark",
                breakpoint: 1024,
                sticky: !0,
                toggleBtn: "caret",
                homeBtn: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z"/></svg>',
                colClasses: !1
            }, options);
        return this.each((function () {
            if (("light" === settings.theme || settings.theme) && nav.addClass(settings.theme), settings.breakpoint && (breakpoint = settings.breakpoint), settings.sticky) {
                const navPos = nav.offset().top;
                $(window).on("scroll", (function () {
                    nav.addClass("fixed"), $(window).scrollTop() <= navPos && nav.removeClass("fixed")
                }))
            }
            if ("caret" !== settings.toggleBtn && "plus" !== settings.toggleBtn || nav.find(".menu").addClass(settings.toggleBtn), settings.homeBtn ? homeBtn = settings.homeBtn : homeBtn = "", settings.phoneLabel ? phoneLabel = settings.phoneLabel : phoneLabel = "", settings.locationLabel ? locationLabel = settings.locationLabel : locationLabel = "", nav.find(".menu").before('<div class="controls"><div class="logo"><a href="../responsive-sticky-mega-nav-snazzy" title="" aria-label="Home">' + homeBtn + '</a></div><div class="cta"><button class="menu-toggle" aria-label="Menu"></button></div></div>'), nav.after('<div class="close-overlay"></div>'), nav.find("li.menu-item-has-children") && $("li.menu-item-has-children").addClass("has-sub"), settings.locationBtn) {
                const btn = '<a href="' + settings + '"target="_blank" aria-label="Location"><svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" viewBox="0 0 24 24"><path d=""/></svg> <span>' + locationLabel + "</span></a>";
                nav.find(".cta").prepend(btn)
            }
            //Funcion la cual cierra el menu toggle
            function closeMenu() {
                $(".menu-toggle").removeClass("active"), nav.find(".menu").removeClass("open"), $(".close-overlay").removeClass("active"), nav.removeClass("scroll")
            }

            //Compara el ancho del navegador para que sea responsive
            function checkWidth() {
                const browserWidth = window.innerWidth;
                browserWidth <= breakpoint ? (nav.addClass("mobile"), nav.removeClass("desktop")) : (nav.removeClass("mobile"), nav.addClass("desktop"), nav.find(".menu .sub-menu").hide(), nav.find(".has-sub").removeClass("open"))
            }
            //Menu toggle
            $(".menu-toggle").on("click", (function () {
                $(this).toggleClass("active"), nav.find(".menu").toggleClass("open"), $(".close-overlay").toggleClass("active"), nav.toggleClass("scroll")
            })), closeMenu(), $(".close-overlay").on("click", closeMenu), $(document).keyup((function (e) {
                if (27 === e.keyCode) return closeMenu()
            })), nav.find(".menu .sub-menu").css({
                display: "flex",
                "flex-direction": "column"
            }).hide(), nav.find(".menu > li:first-child").addClass("active"), nav.find(".menu > li.has-sub > .sub-menu").addClass("mega-menu"), nav.find(".mega-menu > li").addClass("column-title"), settings.colClasses && nav.find(".mega-menu .column-title").each((function (i) {
                $(this).addClass("column-" + (i + 1))
            })), nav.find(".menu > li a").on("click", (function (e) {
                $(this).parent().hasClass("has-sub") && e.preventDefault(), $(this).parent().addClass("active").siblings().removeClass("active")
            })), nav.find("li a").each((function () {
                $(this).parent().hasClass("has-sub") && $(this).parent().append('<a class="toggle" href="#"></a>')
            })), nav.find("li .toggle").on("click", (function (e) {
                e.preventDefault(), $(this).siblings(".sub-menu").slideToggle(250), $(this).parent("li").toggleClass("open")
            })), checkWidth(), $(window).on("resize", checkWidth)
        }))
    }
}(jQuery);